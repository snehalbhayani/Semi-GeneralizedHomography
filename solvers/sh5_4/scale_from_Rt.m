%% p <-> (q,c)
% (R,t) -- > alpha*R*p + t = beta*q + c
% 5th point correspondence p <--> (q,c)

% p =  [-0.2015956119440898 0.04565895924532657 1]';

% q = [3.091027620436843 4.335747033291184 1 ]';

% c = [3.261538516712598  13.190055202498520 -16.291052071819720]';
% R = [[-0.7797890174250046 0.6255579036149801 -0.02462514016562904];
%     [0.04151176781966538 0.01241836676346709 -0.9990608376367341];
%     [-0.6246645991536827 -0.7800789020296336 -0.035651720469129]]';

% t = [-0.9025337027495084 6.42363080661594 -10.08377272032321 ]';
%% Ground truth for the scale
% scale_gt = 0.508343879854848;

function [scale] = scale_from_Rt(p, q, c, R, t, N)

temp1 = cross(q, -c);
temp2 = cross(q, t-R*p/(N'*p));
scale = -temp2(1)/temp1(1);
% scale = (transpose(t) * cross(R*p, q))/...
%     (transpose(c) * cross(R*p, q));

end